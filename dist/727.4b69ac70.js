"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[727],{2727:function(e,t,r){r.r(t),r.d(t,{default:function(){return E}});var n=r(6252),o=r(3577),s={class:"p-4"},a=(0,n._)("p",{class:"text-2xl mb-8"}," Do you really want to remove this post? ",-1),c={class:"flex justify-center items-center space-x-4"},i=(0,n.Uk)(" Remove "),u=(0,n._)("svg",{class:"w-5 h-5 text-white ml-2"},[(0,n._)("use",{"xlink:href":"/sprite.svg#tick"})],-1),l=(0,n.Uk)(" Cancel "),f=(0,n._)("svg",{class:"w-5 h-5 text-white ml-2"},[(0,n._)("use",{"xlink:href":"/sprite.svg#close"})],-1),g={key:2,class:"text-center text-gray-700"},p={key:3,class:"text-center text-gray-700"},d=(0,n.Uk)(" There are no posts in "),h={class:"font-semibold"},y=(0,n.Uk)(" category :( Try to add some first! "),v={key:4},w={class:"space-y-8"},m={class:"h-20 rounded-lg p-2 bg-white flex items-center justify-between"},b={class:"text-lg truncate pr-4"},x=(0,n.Uk)(" You're searching through the "),k={class:"font-semibold"},P=(0,n.Uk)(" category. "),_={class:"w-1/3 h-full flex-shrink-0 relative"},O=["src"],j={class:"text-white text-lg font-semibold absolute left-1/2 top-1/2 transform -translate-y-1/2 -translate-x-1/2 z-[2] truncate max-w-full px-5"},C=(0,n._)("div",{class:"absolute left-0 top-0 w-full h-full bg-black rounded-lg bg-opacity-40 z-[1]"},null,-1);r(9826),r(1539),r(7941),r(2526),r(7327),r(5003),r(4747),r(9337),r(8674),r(5666);var S=r(989),U=r(1366),D=r(3516);function L(e,t,r,n,o,s,a){try{var c=e[s](a),i=c.value}catch(e){return void r(e)}c.done?t(i):Promise.resolve(i).then(n,o)}function R(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function a(e){L(s,n,o,a,c,"next",e)}function c(e){L(s,n,o,a,c,"throw",e)}a(void 0)}))}}function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var B={name:"SingleCategory",components:{PostItem:U.Z,Modal:D.Z},data:function(){return{postToRemove:null,showModal:!1,isLoading:!1,category:null,posts:[],categories:[],users:[]}},computed:z({},(0,S.Se)("auth",["isLoggedIn"])),methods:z(z(z(z(z({},(0,S.nv)("categories",["fetchCategories"])),(0,S.nv)("posts",["fetchPostsByCategory","removePost"])),(0,S.nv)("auth",["fetchUsers"])),(0,S.nv)("toast",["SHOW_SUCCESS"])),{},{deletePost:function(){var e=this;return R(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.removePost(e.postToRemove);case 3:return t.next=5,e.fetchPostsByCategory(e.category.id);case 5:e.posts=t.sent,e.SHOW_SUCCESS("Post has been deleted"),e.isLoading=!1;case 8:case"end":return t.stop()}}),t)})))()}}),created:function(){var e=this;return R(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,r=e.$route.params.id,t.next=4,e.fetchCategories();case 4:if(e.categories=t.sent,e.category=e.categories.find((function(e){return e.title===r}))||null,e.category){t.next=9;break}return e.isLoading=!1,t.abrupt("return");case 9:return t.next=11,e.fetchPostsByCategory(e.category.id);case 11:return e.posts=t.sent,t.next=14,e.fetchUsers();case 14:e.users=t.sent,e.isLoading=!1;case 16:case"end":return t.stop()}}),t)})))()}},E=(0,r(3744).Z)(B,[["render",function(e,t,r,S,U,D){var L=(0,n.up)("MainButton"),R=(0,n.up)("Modal"),M=(0,n.up)("Spinner"),z=(0,n.up)("PostItem");return(0,n.wg)(),(0,n.iD)(n.HY,null,[U.showModal?((0,n.wg)(),(0,n.j4)(R,{key:0},{default:(0,n.w5)((function(){return[(0,n._)("div",s,[a,(0,n._)("div",c,[(0,n.Wm)(L,{type:"button",class:"flex items-center",onClick:t[0]||(t[0]=function(e){D.deletePost(),U.showModal=!1})},{default:(0,n.w5)((function(){return[i,u]})),_:1}),(0,n.Wm)(L,{type:"button",class:"bg-red-500 hover:bg-red-600 flex items-center focus:ring-0",onClick:t[1]||(t[1]=function(e){return U.showModal=!1})},{default:(0,n.w5)((function(){return[l,f]})),_:1})])])]})),_:1})):(0,n.kq)("v-if",!0),U.isLoading?((0,n.wg)(),(0,n.j4)(M,{key:1,class:"mx-auto mt-5"})):U.category?U.posts&&0!==U.posts.length?((0,n.wg)(),(0,n.iD)("div",v,[(0,n._)("div",w,[(0,n._)("div",m,[(0,n._)("p",b,[x,(0,n._)("span",k,(0,o.zw)(U.category.title),1),P]),(0,n._)("div",_,[(0,n._)("img",{src:U.category.photoURL,class:"w-full h-full object-cover rounded-lg"},null,8,O),(0,n._)("p",j,(0,o.zw)(U.category.title),1),C])]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(U.posts,(function(r,o){return(0,n.wg)(),(0,n.j4)(z,{key:r.id,post:r,users:U.users,categories:U.categories,id:o,showControlls:e.isLoggedIn,onRemove:t[2]||(t[2]=function(e){U.showModal=!0,U.postToRemove=e}),onUpdate:t[3]||(t[3]=function(t){return e.$router.push("/update-post/".concat(t))})},null,8,["post","users","categories","id","showControlls"])})),128))])])):((0,n.wg)(),(0,n.iD)("p",p,[d,(0,n._)("span",h,(0,o.zw)(U.category.title),1),y])):((0,n.wg)(),(0,n.iD)("p",g," Such a category doesn't exist :( "))],64)}]])}}]);